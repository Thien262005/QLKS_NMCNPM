<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Đánh Giá - やばい</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <aside class="sidebar">
    <div class="logo">
      <h2><i class="fas fa-crown"></i> やばい</h2>
      <p>Quản Lý Khách Sạn</p>
    </div>
    <ul class="menu">
      <li class="menu-item">
        <a href="index.html" class="menu-link">
          <span>Dashboard</span>
        </a>
      </li>
      <li class="menu-item">
        <a href="bookings.html" class="menu-link">
          <span>Đơn Đặt Phòng</span>
        </a>
      </li>
      <li class="menu-item">
        <a href="rooms.html" class="menu-link">
          <span>Quản Lý Phòng</span>
        </a>
      </li>
      <li class="menu-item">
        <a href="pricing.html" class="menu-link">
          <span>Giá & Khuyến Mãi</span>
        </a>
      </li>
      <li class="menu-item">
        <a href="reviews.html" class="menu-link active">
          <span>Đánh Giá</span>
        </a>
      </li>
      <li class="menu-item">
        <a href="reports.html" class="menu-link">
          <span>Báo Cáo</span>
        </a>
      </li>
      <li class="menu-item">
        <a href="settings.html" class="menu-link">
          <i class="fas fa-cog"></i>
          <span>Cài Đặt</span>
        </a>
      </li>
    </ul>
  </aside>

  <main class="main-content">
    <div class="header">
      <h1 class="welcome">Đánh Giá Từ Khách Hàng</h1>
      <div class="user-info">
        <div class="user-avatar">AD</div>
        <div>
          <div style="font-weight: 600; color: #333">Admin User</div>
          <div style="font-size: 0.85rem; color: #666">Chủ khách sạn</div>
        </div>
      </div>
    </div>

    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-header">
          <div class="stat-title">Đánh Giá Trung Bình</div>
          <div class="stat-icon orange">
            <i class="fas fa-star"></i>
          </div>
        </div>
        <div class="stat-value">4.8/5</div>
        <div class="stat-change">
          <i class="fas fa-arrow-up"></i> +0.2 so với tháng trước
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-header">
          <div class="stat-title">Tổng Đánh Giá</div>
          <div class="stat-icon blue">
            <i class="fas fa-comments"></i>
          </div>
        </div>
        <div class="stat-value">1,234</div>
        <div class="stat-change">
          <i class="fas fa-arrow-up"></i> +156 tháng này
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-header">
          <div class="stat-title">5 Sao</div>
          <div class="stat-icon green">
            <i class="fas fa-heart"></i>
          </div>
        </div>
        <div class="stat-value">892</div>
        <div class="stat-change">
          <i class="fas fa-info-circle"></i> 72% tổng số
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-header">
          <div class="stat-title">Cần Trả Lời</div>
          <div class="stat-icon purple">
            <i class="fas fa-bell"></i>
          </div>
        </div>
        <div class="stat-value">12</div>
        <div class="stat-change">
          <i class="fas fa-exclamation-circle"></i> Chưa phản hồi
        </div>
      </div>
    </div>

    <div class="content-section">
      <div class="section-header">
        <h2 class="section-title">
          <i class="fas fa-star"></i>
          Danh Sách Đánh Giá
        </h2>
        <div style="display: flex; gap: 1rem">
          <select style="padding: 0.8rem 1rem; border: 2px solid #e1e5e9; border-radius: 12px;">
            <option>Tất cả đánh giá</option>
            <option>5 sao</option>
            <option>4 sao</option>
            <option>3 sao</option>
            <option>2 sao</option>
            <option>1 sao</option>
          </select>
          <select style="padding: 0.8rem 1rem; border: 2px solid #e1e5e9; border-radius: 12px;">
            <option>Mới nhất</option>
            <option>Cũ nhất</option>
            <option>Đánh giá cao nhất</option>
            <option>Đánh giá thấp nhất</option>
          </select>
        </div>
      </div>

      <div style="display: flex; flex-direction: column; gap: 1.5rem">
        <div class="review-card">
          <div class="review-header">
            <div class="reviewer-info">
              <div class="reviewer-avatar">NVA</div>
              <div>
                <div style="font-weight: 600; color: #333">Nguyễn Văn An</div>
                <div style="color: #666; font-size: 0.85rem">3 ngày trước • Deluxe King - R101</div>
              </div>
            </div>
            <div class="rating-stars">★★★★★</div>
          </div>
          <p>Khách sạn tuyệt vời! Phòng rộng rãi, sạch sẽ, view đẹp. Nhân viên rất thân thiện và chuyên nghiệp. Bể bơi trên tầng thượng có view thành phố cực đẹp. Sẽ quay lại lần sau!</p>
          <div class="action-btns">
            <button class="btn btn-sm" style="background: #4caf50; color: white" onclick="replyReview(this)">
              <i class="fas fa-reply"></i> Trả Lời
            </button>
            <button class="btn btn-sm btn-edit">
              <i class="fas fa-flag"></i> Báo Cáo
            </button>
          </div>
        </div>

        <div class="review-card">
          <div class="review-header">
            <div class="reviewer-info">
              <div class="reviewer-avatar">PTL</div>
              <div>
                <div style="font-weight: 600; color: #333">Phạm Thị Lan</div>
                <div style="color: #666; font-size: 0.85rem">1 tuần trước • Suite Executive - R102</div>
              </div>
            </div>
            <div class="rating-stars">★★★★★</div>
          </div>
          <p>Vị trí trung tâm thuận tiện đi lại. Bữa sáng buffet đa dạng và ngon. Đặc biệt ấn tượng với dịch vụ spa, rất thư giãn. Highly recommended!</p>
          <div class="review-response">
            <div class="review-response-header">
              <i class="fas fa-reply"></i> Phản hồi từ LuxStay
            </div>
            <p class="review-response-text">Cảm ơn quý khách đã lựa chọn LuxStay! Chúng tôi rất vui khi quý khách hài lòng với dịch vụ. Rất mong được phục vụ quý khách trong lần ghé thăm tới!</p>
            <div style="margin-top: 0.5rem">
              <button class="btn btn-sm" style="background: #ff9800; color: white" onclick="editReply(this)">
                <i class="fas fa-edit"></i> Sửa
              </button>
            </div>
          </div>
          <div class="action-btns">
            <button class="btn btn-sm btn-edit">
              <i class="fas fa-flag"></i> Báo Cáo
            </button>
          </div>
        </div>

        <div class="review-card">
          <div class="review-header">
            <div class="reviewer-info">
              <div class="reviewer-avatar">LVC</div>
              <div>
                <div style="font-weight: 600; color: #333">Lê Văn Cường</div>
                <div style="color: #666; font-size: 0.85rem">2 tuần trước • Presidential Suite - P001</div>
              </div>
            </div>
            <div class="rating-stars">★★★★★</div>
          </div>
          <p>Phòng Presidential Suite sang trọng vượt mong đợi. Không gian rộng lớn, thiết kế hiện đại. Dịch vụ butler 24/7 rất tận tâm. Đây là trải nghiệm tuyệt vời cho kỳ nghỉ gia đình!</p>
          <div class="action-btns">
            <button class="btn btn-sm" style="background: #4caf50; color: white" onclick="replyReview(this)">
              <i class="fas fa-reply"></i> Trả Lời
            </button>
            <button class="btn btn-sm btn-edit">
              <i class="fas fa-flag"></i> Báo Cáo
            </button>
          </div>
        </div>

        <div class="review-card">
          <div class="review-header">
            <div class="reviewer-info">
              <div class="reviewer-avatar">HTM</div>
              <div>
                <div style="font-weight: 600; color: #333">Hoàng Thị Mai</div>
                <div style="color: #666; font-size: 0.85rem">3 tuần trước • Deluxe Twin - R205</div>
              </div>
            </div>
            <div class="rating-stars">★★★★☆</div>
          </div>
          <p>Khách sạn đẹp, phòng sạch sẽ. Tuy nhiên mình thấy giá hơi cao so với các khách sạn cùng phân khúc. Nhân viên lễ tân nhiệt tình, check-in nhanh. Nhìn chung là trải nghiệm tốt.</p>
          <div class="review-response">
            <div class="review-response-header">
              <i class="fas fa-reply"></i> Phản hồi từ LuxStay
            </div>
            <p class="review-response-text">Cảm ơn quý khách đã chia sẻ trải nghiệm. Chúng tôi luôn cố gắng mang đến chất lượng dịch vụ tốt nhất. Mong quý khách quan tâm đến các chương trình khuyến mãi của chúng tôi để có mức giá tốt hơn!</p>
            <div style="margin-top: 0.5rem">
              <button class="btn btn-sm" style="background: #ff9800; color: white" onclick="editReply(this)">
                <i class="fas fa-edit"></i> Sửa
              </button>
            </div>
          </div>
          <div class="action-btns">
            <button class="btn btn-sm btn-edit">
              <i class="fas fa-flag"></i> Báo Cáo
            </button>
          </div>
        </div>

        <div class="review-card">
          <div class="review-header">
            <div class="reviewer-info">
              <div class="reviewer-avatar">DQH</div>
              <div>
                <div style="font-weight: 600; color: #333">Đỗ Quang Huy</div>
                <div style="color: #666; font-size: 0.85rem">1 tháng trước • Suite Family - R302</div>
              </div>
            </div>
            <div class="rating-stars">★★★★★</div>
          </div>
          <p>Phòng Family Suite rất phù hợp cho gia đình có trẻ nhỏ. Con tôi rất thích khu vui chơi trẻ em và bể bơi. Nhân viên chu đáo, có ghế ngồi ăn dặm và nôi em bé. Chắc chắn sẽ quay lại!</p>
          <div class="review-response">
            <div class="review-response-header">
              <i class="fas fa-reply"></i> Phản hồi từ LuxStay
            </div>
            <p class="review-response-text">Cảm ơn gia đình quý khách! Chúng tôi rất vui khi các bé thích khu vui chơi. Hẹn gặp lại gia đình quý khách trong chuyến đi tới!</p>
            <div style="margin-top: 0.5rem">
              <button class="btn btn-sm" style="background: #ff9800; color: white" onclick="editReply(this)">
                <i class="fas fa-edit"></i> Sửa
              </button>
            </div>
          </div>
          <div class="action-btns">
            <button class="btn btn-sm btn-edit">
              <i class="fas fa-flag"></i> Báo Cáo
            </button>
          </div>
        </div>

        <div class="review-card">
          <div class="review-header">
            <div class="reviewer-info">
              <div class="reviewer-avatar">NTH</div>
              <div>
                <div style="font-weight: 600; color: #333">Ngô Thị Hương</div>
                <div style="color: #666; font-size: 0.85rem">1 tháng trước • Deluxe King - R205</div>
              </div>
            </div>
            <div class="rating-stars">★★★★★</div>
          </div>
          <p>Trải nghiệm tuyệt vời! Phòng đẹp, sạch sẽ, tiện nghi đầy đủ. Đặc biệt thích dịch vụ breakfast rất ngon và đa dạng. Nhân viên nhiệt tình, chu đáo. Chắc chắn sẽ giới thiệu cho bạn bè!</p>
          <div class="review-response">
            <div class="review-response-header">
              <i class="fas fa-reply"></i> Phản hồi từ LuxStay
            </div>
            <p class="review-response-text">Cảm ơn quý khách rất nhiều! Chúng tôi rất vui khi quý khách hài lòng với dịch vụ breakfast và các tiện ích của khách sạn. Rất mong được đón tiếp quý khách và bạn bè trong tương lai!</p>
            <div style="margin-top: 0.5rem">
              <button class="btn btn-sm" style="background: #ff9800; color: white" onclick="editReply(this)">
                <i class="fas fa-edit"></i> Sửa
              </button>
            </div>
          </div>
          <div class="action-btns">
            <button class="btn btn-sm btn-edit">
              <i class="fas fa-flag"></i> Báo Cáo
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    function replyReview(btn) {
      const card = btn.closest('.review-card');
      const actionsDiv = card.querySelector('.action-btns');
      
      // Kiểm tra xem đã có form reply chưa
      if (card.querySelector('.reply-form')) {
        return;
      }
      
      // Tạo form reply
      const replyForm = document.createElement('div');
      replyForm.className = 'review-response';
      replyForm.style.marginTop = '1rem';
      replyForm.innerHTML = `
        <div class="review-response-header">
          <i class="fas fa-reply"></i> Trả lời đánh giá
        </div>
        <textarea class="reply-form" style="width: 100%; padding: 0.8rem; border: 2px solid #e1e5e9; border-radius: 12px; min-height: 100px; font-family: 'Poppins', sans-serif; margin-top: 0.5rem" placeholder="Nhập phản hồi của bạn..."></textarea>
        <div style="margin-top: 0.5rem; display: flex; gap: 0.5rem">
          <button class="btn btn-sm" style="background: #4caf50; color: white" onclick="submitReply(this)">
            <i class="fas fa-check"></i> Gửi
          </button>
          <button class="btn btn-sm" style="background: #f44336; color: white" onclick="cancelReply(this)">
            <i class="fas fa-times"></i> Hủy
          </button>
        </div>
      `;
      
      actionsDiv.parentNode.insertBefore(replyForm, actionsDiv);
    }
    
    function submitReply(btn) {
      const form = btn.closest('.review-response');
      const textarea = form.querySelector('textarea');
      const replyText = textarea.value.trim();
      
      if (!replyText) {
        alert('Vui lòng nhập nội dung phản hồi!');
        return;
      }
      
      // Thay thế form bằng phản hồi đã gửi
      form.innerHTML = `
        <div class="review-response-header">
          <i class="fas fa-reply"></i> Phản hồi từ LuxStay
        </div>
        <p class="review-response-text">${replyText}</p>
        <div style="margin-top: 0.5rem">
          <button class="btn btn-sm" style="background: #ff9800; color: white" onclick="editReply(this)">
            <i class="fas fa-edit"></i> Sửa
          </button>
        </div>
      `;
      
      alert('Đã gửi phản hồi thành công!');
    }
    
    function cancelReply(btn) {
      const form = btn.closest('.review-response');
      form.remove();
    }
    
    function editReply(btn) {
      const responseDiv = btn.closest('.review-response');
      const currentText = responseDiv.querySelector('.review-response-text').textContent;
      
      // Thay thế phản hồi bằng form chỉnh sửa
      responseDiv.innerHTML = `
        <div class="review-response-header">
          <i class="fas fa-edit"></i> Chỉnh sửa phản hồi
        </div>
        <textarea class="reply-form" style="width: 100%; padding: 0.8rem; border: 2px solid #e1e5e9; border-radius: 12px; min-height: 100px; font-family: 'Poppins', sans-serif; margin-top: 0.5rem">${currentText}</textarea>
        <div style="margin-top: 0.5rem; display: flex; gap: 0.5rem">
          <button class="btn btn-sm" style="background: #4caf50; color: white" onclick="saveEditReply(this, '${currentText.replace(/'/g, "\\'")}')">
            <i class="fas fa-check"></i> Lưu
          </button>
          <button class="btn btn-sm" style="background: #f44336; color: white" onclick="cancelEditReply(this, '${currentText.replace(/'/g, "\\'")}')">
            <i class="fas fa-times"></i> Hủy
          </button>
        </div>
      `;
    }
    
    function saveEditReply(btn, oldText) {
      const responseDiv = btn.closest('.review-response');
      const textarea = responseDiv.querySelector('textarea');
      const newText = textarea.value.trim();
      
      if (!newText) {
        alert('Vui lòng nhập nội dung phản hồi!');
        return;
      }
      
      // Cập nhật phản hồi
      responseDiv.innerHTML = `
        <div class="review-response-header">
          <i class="fas fa-reply"></i> Phản hồi từ LuxStay
        </div>
        <p class="review-response-text">${newText}</p>
        <div style="margin-top: 0.5rem">
          <button class="btn btn-sm" style="background: #ff9800; color: white" onclick="editReply(this)">
            <i class="fas fa-edit"></i> Sửa
          </button>
        </div>
      `;
      
      alert('Đã cập nhật phản hồi thành công!');
    }
    
    function cancelEditReply(btn, oldText) {
      const responseDiv = btn.closest('.review-response');
      
      // Khôi phục phản hồi cũ
      responseDiv.innerHTML = `
        <div class="review-response-header">
          <i class="fas fa-reply"></i> Phản hồi từ LuxStay
        </div>
        <p class="review-response-text">${oldText}</p>
        <div style="margin-top: 0.5rem">
          <button class="btn btn-sm" style="background: #ff9800; color: white" onclick="editReply(this)">
            <i class="fas fa-edit"></i> Sửa
          </button>
        </div>
      `;
    }
  </script>